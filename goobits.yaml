# Goobits configuration for Matilda Voice CLI
# This file defines the text-to-speech CLI application

# Setup fields for setup.sh
package_name: "goobits-matilda-voice"
command_name: "voice"
display_name: "Matilda Voice - Text to Speech"
description: "Multi-provider text-to-speech with voice cloning"

# CLI generation configuration
cli_path: "src/matilda_voice/cli.py"
cli_hooks_path: "src/matilda_voice/app_hooks.py"

python:
  minimum_version: "3.8"
  maximum_version: "3.13"

dependencies:
  required:
    - git
    - pipx

installation:
  pypi_name: "goobits-matilda-voice"
  development_path: "."
  setup_path: "scripts/setup.sh"  # Output to scripts directory
  extras:
    python: ["dev", "cloud"]  # Include dev tools and cloud TTS providers (OpenAI, Google, ElevenLabs)
    apt: ["ffmpeg", "sox"]  # Audio processing libraries

shell_integration:
  enabled: false
  alias: "voice"
  aliases: ["tts"]  # Backward compatibility

validation:
  check_api_keys: false
  check_disk_space: true
  minimum_disk_space_mb: 100

messages:
  install_success: |
    Matilda Voice has been installed successfully!
    You can now use 'voice' from your terminal.

    Quick start:
      voice "Hello world"
      voice save "Hello" -o out.mp3
      voice voices

  install_dev_success: |
    Matilda Voice has been installed in development mode!
    âœ… Your local changes will be reflected immediately - no reinstalling needed!

    Development workflow:
      - Edit code in src/matilda_voice/ directory
      - Test immediately with: voice "test"
      - Run tests with: ./test.sh

    ğŸ’¡ No need to run ./setup.sh upgrade after code changes!

  upgrade_success: |
    Matilda Voice has been upgraded successfully!
    Check out the latest features with: voice --version

  uninstall_success: |
    Matilda Voice has been uninstalled.
    Thank you for using Matilda Voice!

# CLI fields for cli.py generation
cli:
  name: "MATILDA VOICE CLI"
  version: "1.1.4"
  display_version: true
  tagline: "Multi-provider text-to-speech with voice cloning"
  description: "Convert text into natural speech with AI-powered auto-selection and real-time streaming."
  icon: "ğŸ”Š"
  enable_recursive_help: true
  enable_help_json: true

  header_sections:
    - title: "ğŸš€ Quick Start"
      items:
        - { item: 'voice "Hello world"', desc: "Instantly speak text (default command)", style: "example" }
        - { item: 'voice save "Hello" -o out.mp3', desc: "Save speech to audio file", style: "example" }

    - title: "ğŸ’¡ Core Commands"
      items:
        - { item: "speak", desc: "ğŸ—£ï¸  Speak text aloud (default command)", style: "command" }
        - { item: "save", desc: "ğŸ’¾ Save text as an audio file", style: "command" }
        - { item: "voices", desc: "ğŸ” Explore and test available voices", style: "command" }

    - title: "ğŸ”§ First-time Setup"
      items:
        - { item: "1. Check providers", desc: "voice providers", style: "setup" }
        - { item: "2. Set API keys", desc: "voice config set openai_api_key YOUR_KEY", style: "setup" }
  
  command_groups:
    - name: "Core Commands"
      commands: ["speak", "save", "voices"]
    - name: "Provider Management"
      commands: ["providers", "info", "install"]
    - name: "Configuration"
      commands: ["config", "status"]
    - name: "Advanced Features"
      commands: ["voice", "document"]

  commands:
    speak:
      desc: "Speak text aloud"
      icon: "ğŸ—£ï¸"
      is_default: true
      args:
        - name: "text"
          desc: "Text to speak"
          required: false
        - name: "options"
          desc: "Additional options"
          nargs: "*"
      options:
        - name: "voice"
          short: "v"
          type: "str"
          desc: "ğŸ¤ Voice selection (e.g., en-GB-SoniaNeural for edge_tts)"
        - name: "rate"
          type: "str"
          desc: "âš¡ Speech rate adjustment (e.g., +20%, -50%, 150%)"
        - name: "pitch"
          type: "str"
          desc: "ğŸµ Pitch adjustment (e.g., +5Hz, -10Hz)"
        - name: "debug"
          type: "flag"
          desc: "ğŸ Display debug information during processing"
    
    save:
      desc: "Save text as an audio file"
      icon: "ğŸ’¾"
      args:
        - name: "text"
          desc: "Text to save as audio"
          required: false
        - name: "options"
          desc: "Additional options"
          nargs: "*"
      options:
        - name: "output"
          short: "o"
          type: "str"
          desc: "ğŸ’¾ Output file path"
        - name: "format"
          short: "f"
          type: "str"
          desc: "ğŸ”§ Audio output format"
          choices: ["mp3", "wav", "ogg", "flac"]
        - name: "voice"
          short: "v"
          type: "str"
          desc: "ğŸ¤ Voice selection (e.g., en-GB-SoniaNeural for edge_tts)"
        - name: "json"
          type: "flag"
          desc: "ğŸ”§ Output results as JSON"
        - name: "debug"
          type: "flag"
          desc: "ğŸ Display debug information during processing"
        - name: "rate"
          type: "str"
          desc: "âš¡ Speech rate adjustment (e.g., +20%, -50%, 150%)"
        - name: "pitch"
          type: "str"
          desc: "ğŸµ Pitch adjustment (e.g., +5Hz, -10Hz)"
    
    voices:
      desc: "Explore and test available voices"
      icon: "ğŸ”"
      args:
        - name: "args"
          desc: "Additional arguments"
          nargs: "*"
          required: false
    
    providers:
      desc: "Show available providers and their status"
      icon: "ğŸ“‹"
      args:
        - name: "provider_name"
          desc: "Provider name for setup instructions (optional)"
          required: false
    
    install:
      desc: "Install required provider dependencies"
      icon: "ğŸ“¥"
      args:
        - name: "args"
          desc: "Provider and options (e.g., 'chatterbox gpu')"
          nargs: "*"
          required: false
    
    info:
      desc: "Detailed provider information"
      icon: "ğŸ‘€"
      args:
        - name: "provider"
          desc: "Provider name (optional)"
          required: false
    
    document:
      desc: "Convert documents to speech"
      icon: "ğŸ“–"
      args:
        - name: "document_path"
          desc: "Path to document file"
          type: "path"
          path_exists: true
        - name: "options"
          desc: "Additional options"
          nargs: "*"
      options:
        - name: "save"
          type: "flag"
          desc: "ğŸ’¾ Save audio output to file"
        - name: "output"
          short: "o"
          type: "str"
          desc: "ğŸ“ Output file path"
        - name: "format"
          short: "f"
          type: "str"
          desc: "ğŸ”§ Audio output format"
          choices: ["mp3", "wav", "ogg", "flac"]
        - name: "voice"
          short: "v"
          type: "str"
          desc: "ğŸ¤ Voice to use"
        - name: "json"
          type: "flag"
          desc: "ğŸ”§ Output results as JSON"
        - name: "debug"
          type: "flag"
          desc: "ğŸ Display debug information during processing"
        - name: "doc-format"
          type: "str"
          desc: "ğŸ“„ Input document format"
          choices: ["auto", "markdown", "html", "json"]
          default: "auto"
        - name: "ssml-platform"
          type: "str"
          desc: "ğŸ§ï¸ SSML format platform"
          choices: ["azure", "google", "amazon", "generic"]
          default: "generic"
        - name: "emotion-profile"
          type: "str"
          desc: "ğŸ­ Speech emotion style"
          choices: ["technical", "marketing", "narrative", "tutorial", "auto"]
          default: "auto"
        - name: "rate"
          type: "str"
          desc: "âš¡ Speech rate adjustment"
        - name: "pitch"
          type: "str"
          desc: "ğŸµ Pitch adjustment"
    
    voice:
      desc: "Manage voice loading and caching"
      icon: "ğŸ¤"
      subcommands:
        load:
          desc: "Load voices into memory for faster access"
          args:
            - name: "voice_files"
              desc: "Voice files to load"
              nargs: "*"
              required: true
        unload:
          desc: "Remove voices from memory"
          args:
            - name: "voice_files"
              desc: "Voice files to unload"
              nargs: "*"
              required: false
          options:
            - name: "all"
              type: "flag"
              desc: "ğŸ§¹ Remove all voices from memory"
        status:
          desc: "Show currently loaded voices and system status"
    
    status:
      desc: "Check system and provider health"
      icon: "ğŸ©º"
    
    config:
      desc: "Adjust CLI settings and API keys"
      icon: "ğŸ”§"
      args:
        - name: "action"
          desc: "Configuration action"
          choices: ["show", "voice", "provider", "format", "get", "edit", "set"]
          required: false
        - name: "key"
          desc: "Configuration key"
          required: false
        - name: "value"
          desc: "Configuration value"
          required: false
  
  config:
    rich_help_panel: true
    show_metavars_column: false
    append_metavars_help: true
    style_errors_suggestion: true
    max_width: 120